<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta name="keywords" content="web site!">

    <script src="//cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script type="text/javascript" src="../jsjson/particles.js"></script>


    <link rel="shortcut icon" type="image/png" href="/favicon.png"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">
    <link rel="stylesheet"
      href='https://fonts.googleapis.com/css?family=Varela+Round|OpenSans'>

    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
      integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
      crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
      integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
      crossorigin=""></script>
    <!-- /Leaflet -->
    <title>Electi.online</title>
    <link rel="stylesheet" href="../css/style.css">
  </head>

  <body id="particles-js" bgcolor="#000000">
    <header>
      <div class="container">
        <div id="branding">
          <h1 class="animated slideInLeft delay- 2s" align="justified">Electi.online</h1>
        </div>
      </div>
    </header>

    <section id="showcase">
      <div class='container'>
        <h2>Campaign Finance: visualized</h2>
      </div>
    </section>

    <!--section id="experience"-->
      <div class="row">
        <h3>Select a candidate:</h3>
          <br>
          <div class="icon">
            <form class="column" onclick="bernieSanders()">
              <input type="image" src="../img/sanders.png" alt="Sanders" width="50" height="50">
              <p>Bernie Sanders</p>
            </form>
          </div>
          <div class="icon">
            <form class="column" onclick="elWarren()">>
              <input type="image" src="../img/warren.png" alt="Warren" width="50" height="50">
              <p>Elizabeth Warren</p>
            </form>
          </div>
          <div class="icon">
            <form class="column" onclick="peteButtigieg()">>
              <input type="image" src="../img/buttigieg.png" alt="Buttigieg" width="50" height="50">
              <p>Pete Buttigieg</p>
            </form>
          </div>
          <div class="icon">
            <form class="column" onclick="joeBiden()">>
              <input type="image" src="../img/biden.png" alt="Biden" width="50" height="50">
              <p>Joe Biden</p>
            </form>
          </div>
          <div class="icon">
            <form class="column" onclick="amyKlobuchar()">>
              <input type="image" src="../img/klobuchar.png" alt="Klobuchar" width="50" height="50">
              <p>Amy Klobuchar</p>
            </form>
          </div>
    <!--/section-->

    <div class="slidecontainer">
      <input type="range" min="1" max="100" value="50" class="slider" id="myRange">
      <p><span id="demo"></span></p>
    </div>

    <script src="../js/ajaxEngine.js"></script>

    <script>


      function bernieSanders() {
        /*document.getElementById("demo").innerHTML = "Sanders";*/
      }
      function elWarren() {
        /*document.getElementById("demo").innerHTML = "Warren";*/
      }
      function peteButtigieg() {
        /*document.getElementById("demo").innerHTML = "Buttigieg";*/
      }
      function joeBiden() {
        /*document.getElementById("demo").innerHTML = "Biden";*/
      }
      function amyKlobuchar() {
        /*document.getElementById("demo").innerHTML = "Klobuchar";*/
      }

    </script>

    <div id="mapid"></div>

    <script
      src="https://code.jquery.com/jquery-3.4.1.min.js"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
      crossorigin="anonymous"></script>

    <script>
      let z2c; let cData;
      var mymap = L.map('mapid').setView([38.0, -96.0], 5);
      L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
        maxZoom: 18,
        id: 'mapbox/streets-v11',
        accessToken: 'pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw'
      }).addTo(mymap);
      console.log("Trying to retrieve everything...");
      $.ajax({
        type: "GET",
        url: "http://localhost:5000/js/z2c.json",
        success: function(result) {
          z2c = result;
          $.ajax({
            type: "GET",
            url: "http://localhost:5000/api/donations/",
            data: {
              monthRange: true,
              candidateRange: true,
            },
            success: function(result) {
              console.log(result);
              cData = result;
              vals = cData[new Date("2019-09-01")]["P60007168"];
              console.log(vals);
              let valKeys = Object.keys(vals);
              for (let i = 0; i < valKeys.length; i++) {
                if (z2c[valKeys[i]] != null) {
                  let lat = z2c[valKeys[i]]["lat"];
                  let lng = z2c[valKeys[i]]["lng"];
                  L.circle([lat, lng], {radius: Math.log(vals[valKeys[i]]), color: "#0000ff"}).addTo(mymap);
                }
              }
              // 
              // vals2 = cData[new Date("2018-10-01")]["P00009621"];
              // console.log(vals2);
              // valKeys = Object.keys(vals2);
              // for (let i = 0; i < valKeys.length; i++) {
              //   if (z2c[valKeys[i]] != null) {
              //     let lat = z2c[valKeys[i]]["lat"];
              //     let lng = z2c[valKeys[i]]["lng"];
              //     L.circle([lat, lng], {radius: 10, color: "#ff0000"}).addTo(mymap);
              //   }
              // }

              // updateDots('P60007168', cachedData[new Date("2018-10-01")]["P60007168"]);
            },
          });
        }
      });

    </script>

    <!--
    <div id="map" width="1000" height="500" style="border:1px solid #ffffff;">
    </div>
    -->
    <!-- <div id="mapContainer">
      <div id="myMap" class="mapDiv">
    </div>

    <script src="../js/map.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDVS--25wxecQtTu2gvCVBdCvOcEfwvkiM&callback=initMap"
    async defer></script> -->
  </body>
</html>
